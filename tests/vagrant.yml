# test file for bash
---
- hosts: all
  remote_user: vagrant
  sudo: true
  roles:
    - ../../
  vars:

    - skel_entries:

      - path: "/etc/skel/my_dir"
        mode: "0700"
        state: "directory"

      - name : "git clone /etc/skel/bin/acemenu repository"
        repo  : 'https://github.com/cjsteel/script-bash-acemenu.git'
        dest  : '/etc/skel/my_dir/acemenu'
        clone : yes

      - name         : "get file at url"
        url          : 'https://downloads.sourceforge.net/project/brainworkshop/brainworkshop/Brain%20Workshop%204.8/brainworkshop-4.8.4.zip?r=&ts=1512181223&use_mirror=pilotfiber'
        dest         : "/etc/skel/my_dir/."
        mode         : "0770"
        resource_type: 'url'

      - path: "/etc/skel/my_dir/test"
        mode: "0700"
        state: 'touch'

      - path: "/etc/skel/passwd"
        src: "/etc/passwd"
        state: "link"

      - link_name: "my_relative_link"
        link_target: "my_dir/test"
        link_dir : "/etc/skel"
        state: "relative_link"

      - path: "/etc/skel/foo"
        src: "./files/foo"
        state: "copy"

      - path: "/etc/skel/bar"
        src: "./templates/bar.j2"
        state: "template"

      - type: 'blockinfile'    
        path: "/etc/skel/.bashrc"
        insertafter: "EOF"
        block: |
          # if running bash
          if [ -n "$BASH_VERSION" ]; then
              # include /opt/display/bin/display if it exists
              if [ -f "/opt/display/bin/display" ]; then
                  PATH="/opt/display/bin:$PATH"

          	. "/opt/display/bin/"
              fi
          fi
        state: "present"




