# test file for bash
---
- hosts: all
  remote_user: vagrant
  sudo: true
  roles:
    - ../../
  vars:

    - skel_entries:

      - path: "/etc/skel/my_dir"
        mode: "0700"
        state: "directory"

      - name: "git clone /etc/skel/bin/acemenu repository"
        repo: 'https://github.com/cjsteel/script-bash-acemenu.git'
        dest: '/etc/skel/my_dir/acemenu'
        mode: '0770'
        clone: yes

      - name: "Download master.zip"
        url: 'https://github.com/cjsteel/script-bash-acemenu/archive/master.zip'
        dest: '/etc/skel/my_dir/.'
        mode: '0700'
        checksum : 'sha256:89ae3a91a6fde5286d8d6c39650c6f213821b01c1633721789e3ea8a1fef020d'
        force : yes
        resource_type: 'url'

      - path: "/etc/skel/my_dir/test"
        mode: "0700"
        state: 'touch'

      - path: "/etc/skel/passwd"
        src: "/etc/passwd"
        state: "link"

      - link_name: "my_relative_link"
        link_target: "my_dir/test"
        link_dir : "/etc/skel"
        state: "relative_link"

      - path: "/etc/skel/foo"
        src: "./files/foo"
        state: "copy"

      - path: "/etc/skel/bar"
        src: "./templates/bar.j2"
        state: "template"

      - type: 'blockinfile'    
        path: "/etc/skel/.bashrc"
        insertafter: "EOF"
        block: |
          # if running bash
          if [ -n "$BASH_VERSION" ]; then
              # include /opt/display/bin/display if it exists
              if [ -f "/opt/display/bin/display" ]; then
                  PATH="/opt/display/bin:$PATH"

          	. "/opt/display/bin/"
              fi
          fi
        state: "present"




